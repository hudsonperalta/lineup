!function(n){"use strict";window.angular&&window.Sortable?n(angular,Sortable):"function"==typeof define&&define.amd&&define(["angular","./Sortable"],n)}(function(n,e){"use strict";n.module("ng-sortable",[]).constant("version","0.3.7").directive("ngSortable",["$parse",function(t){function o(e){var o=n.element(e).scope(),i=[].filter.call(e.childNodes,function(n){return 8===n.nodeType&&-1!==n.nodeValue.indexOf("ngRepeat:")})[0];if(!i)return null;i=i.nodeValue.match(/ngRepeat:\s*(?:\(.*?,\s*)?([^\s)]+)[\s)]+in\s+([^\s|]+)/);var r=t(i[1]),a=t(i[2]);return{item:function(e){return r(n.element(e).scope())},items:function(){return a(o)}}}var i,r;return{restrict:"AC",link:function(t,a,l){function c(n,e){var t="on"+n.type.charAt(0).toUpperCase()+n.type.substr(1);f[t]&&f[t]({model:e||p&&p.item(n.item),models:p&&p.items(),oldIndex:n.oldIndex,newIndex:n.newIndex})}function d(e){if(p){var a=e.oldIndex,l=e.newIndex,c=p.items();if(u!==e.from){var d=o(e.from),s=d.items();a=s.indexOf(d.item(e.item)),i=s[a],e.clone?(e.from.removeChild(e.clone),i=n.copy(i)):s.splice(a,1),c.splice(l,0,i),e.from.insertBefore(e.item,r)}else c.splice(l,0,c.splice(a,1)[0]);t.$apply()}}var u=a[0],s=l.ngSortable,f=t.$eval(s)||{},p=o(u),m;m=e.create(u,Object.keys(f).reduce(function(n,e){return n[e]=n[e]||f[e],n},{onStart:function(n){r=n.item.nextSibling,c(n),t.$apply()},onEnd:function(n){c(n,i),t.$apply()},onAdd:function(n){d(n),c(n,i),t.$apply()},onUpdate:function(n){d(n),c(n)},onRemove:function(n){c(n,i)},onSort:function(n){c(n)}})),a.on("$destroy",function(){m.destroy(),m=null,r=null}),s&&!/{|}/.test(s)&&n.forEach(["sort","disabled","draggable","handle","animation","onStart","onEnd","onAdd","onUpdate","onRemove","onSort"],function(n){t.$watch(s+"."+n,function(e){void 0!==e&&(f[n]=e,/^on[A-Z]/.test(n)||m.option(n,e))})})}}}])});